{"ast":null,"code":"var _jsxFileName = \"/Users/andy/Projects/beer-cooler-merged/client/src/components/cooler/ReviewOrder.js\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link, useHistory } from 'react-router-dom';\nimport { coolerPlaceOrder, coolerReview } from '../../actions/cooler-action';\nimport { OrderAddress } from '../order/OrderAddress';\nimport { OrderPayment } from '../order/OrderPayment';\nimport { OrderItems } from '../order/OrderItems';\nimport Spinner from '../layout/Spinner';\nimport { setAlert } from '../../actions/alert-action';\nexport const ReviewOrder = ({\n  checkout,\n  address,\n  payment,\n  cooler,\n  coolerPlaceOrder,\n  checkoutAsGuest,\n  coolerReview\n}) => {\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (checkout === false) {\n      history.push('/checkout');\n    }\n  }, [checkout, history]);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Spinner, {\n      message: \"Submitting your order...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 12\n      }\n    });\n  }\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    const coolerItems = cooler.map(i => ({\n      name: i.name,\n      quantity: i.quantity\n    }));\n    const newOrder = {\n      address,\n      payment: {\n        cardName: payment.cardName,\n        cardNumber: payment.cardNumber\n      },\n      cooler: coolerItems\n    };\n\n    try {\n      const res = await coolerPlaceOrder(newOrder, checkoutAsGuest);\n      coolerReview();\n      setTimeout(() => {\n        history.push(`/my-orders/${res.order._id}`, {\n          newOrder: true\n        });\n      }, 3000);\n    } catch (error) {\n      console.log(error);\n      setAlert('A problem occurred.  Please try again.');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"large \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-shopping-cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }), \" Review Your Order\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(OrderAddress, {\n    address: address,\n    review: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(OrderPayment, {\n    payment: payment,\n    review: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(OrderItems, {\n    cooler: cooler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-actions d-flex justify-content-between mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/checkout\",\n    className: \"btn pull-left btn-link text-muted pl-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/review_order\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary btn-lg mb-1\",\n    onClick: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, \"Place Your Order \", /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-chevron-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 30\n    }\n  })))));\n};\n\nconst mapStateToProps = state => ({\n  checkout: state.cooler.checkout,\n  review: state.cooler.review,\n  address: state.profile.address,\n  payment: state.profile.payment,\n  cooler: state.cooler.cooler,\n  checkoutAsGuest: state.cooler.checkoutAsGuest\n});\n\nexport default connect(mapStateToProps, {\n  coolerPlaceOrder,\n  coolerReview\n})(ReviewOrder);","map":{"version":3,"sources":["/Users/andy/Projects/beer-cooler-merged/client/src/components/cooler/ReviewOrder.js"],"names":["React","useEffect","useState","connect","Link","useHistory","coolerPlaceOrder","coolerReview","OrderAddress","OrderPayment","OrderItems","Spinner","setAlert","ReviewOrder","checkout","address","payment","cooler","checkoutAsGuest","history","loading","setLoading","push","onSubmit","e","preventDefault","coolerItems","map","i","name","quantity","newOrder","cardName","cardNumber","res","setTimeout","order","_id","error","console","log","mapStateToProps","state","review","profile"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { coolerPlaceOrder, coolerReview } from '../../actions/cooler-action';\nimport { OrderAddress } from '../order/OrderAddress';\nimport { OrderPayment } from '../order/OrderPayment';\nimport { OrderItems } from '../order/OrderItems';\n\nimport Spinner from '../layout/Spinner';\nimport { setAlert } from '../../actions/alert-action';\n\nexport const ReviewOrder = ({\n  checkout,\n  address,\n  payment,\n  cooler,\n  coolerPlaceOrder,\n  checkoutAsGuest,\n  coolerReview,\n}) => {\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (checkout === false) {\n      history.push('/checkout');\n    }\n  }, [checkout, history]);\n\n  if (loading) {\n    return <Spinner message='Submitting your order...' />;\n  }\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const coolerItems = cooler.map((i) => ({\n      name: i.name,\n      quantity: i.quantity,\n    }));\n\n    const newOrder = {\n      address,\n      payment: {\n        cardName: payment.cardName,\n        cardNumber: payment.cardNumber,\n      },\n      cooler: coolerItems,\n    };\n\n    try {\n      const res = await coolerPlaceOrder(newOrder, checkoutAsGuest);\n      coolerReview();\n\n      setTimeout(() => {\n        history.push(`/my-orders/${res.order._id}`, { newOrder: true });\n      }, 3000);\n    } catch (error) {\n      console.log(error);\n      setAlert('A problem occurred.  Please try again.');\n    }\n  };\n\n  return (\n    <div>\n      <h1 className='large '>\n        <i className='fas fa-shopping-cart'></i> Review Your Order\n      </h1>\n      <div className='d-flex justify-content-between'>\n        <div>\n          <div className='card'>\n            <OrderAddress address={address} review={true} />\n          </div>\n          <div className='card'>\n            <OrderPayment payment={payment} review={true} />\n          </div>\n        </div>\n        <div className='card'>\n          <OrderItems cooler={cooler} />\n        </div>\n      </div>\n\n      <div className='form-actions d-flex justify-content-between mt-4'>\n        <Link to='/checkout' className='btn pull-left btn-link text-muted pl-0'>\n          Back\n        </Link>\n\n        <Link to='/review_order'>\n          <button\n            type='submit'\n            className='btn btn-primary btn-lg mb-1'\n            onClick={onSubmit}\n          >\n            Place Your Order <i className='fas fa-chevron-right'></i>\n          </button>\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  checkout: state.cooler.checkout,\n  review: state.cooler.review,\n  address: state.profile.address,\n  payment: state.profile.payment,\n  cooler: state.cooler.cooler,\n  checkoutAsGuest: state.cooler.checkoutAsGuest,\n});\n\nexport default connect(mapStateToProps, {\n  coolerPlaceOrder,\n  coolerReview,\n})(ReviewOrder);\n"]},"metadata":{},"sourceType":"module"}